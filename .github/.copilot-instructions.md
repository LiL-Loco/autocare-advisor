# AutoCare Advisor - SaaS Development Instructions

## üìã Projekt-√úbersicht

**Projektname**: AutoCare Advisor - SaaS Development  
**Team**: GLANZtastic  
**Linear Projekt-ID**: `6fa9d986-c3cf-4e35-97ba-97b29e999c53`  
**Entwicklungszeit**: 18 Monate (4 Phasen)  
**Start**: August 2025

## üéØ Gesch√§ftsmodell

### Was ist AutoCare Advisor?

- **Eigenst√§ndige B2B SaaS-Plattform** f√ºr Autopflegemittel-Empfehlungen
- **NICHT**: Widgets f√ºr Online-Shops
- **KERN**: Regel-basierte Produktberatung ohne KI/ML
- **Zielgruppe**: B2B Partner (Autopflegemittel-Hersteller/H√§ndler) + Endkunden

### Revenue Streams

1. **Abonnements** - Partner zahlen monatliche Geb√ºhren
2. **Provisionen** - % vom Verkauf √ºber unsere Empfehlungen
3. **Pay-per-Click** - Partner zahlen f√ºr Klicks auf ihre Produkte
4. **Premium Listings** - Hervorgehobene Platzierung in Empfehlungen

## üèóÔ∏è Technische Architektur

### Tech Stack (FEST DEFINIERT)

```
Frontend: React 18+ mit TypeScript
Backend: Node.js mit Express/Fastify
Database: PostgreSQL (Hauptdaten) + MongoDB (Produktkatalog)
Analytics: ClickHouse f√ºr Performance-Tracking
Cache: Redis f√ºr Session-Management
Infrastructure: AWS (EKS, RDS, S3)
Containerization: Docker + Kubernetes
```

### System-Komponenten

1. **Customer Web App** - Endkunden-Interface f√ºr Empfehlungen
2. **Partner Dashboard** - B2B Interface f√ºr Produktmanagement
3. **Admin Panel** - Internes Management-System

## üß† Recommendation Engine (WICHTIG!)

### ‚ö†Ô∏è KEINE KI/ML VERWENDEN!

- **Regel-basierte Empfehlungen** basierend auf strukturierten Daten
- **Scoring-Algorithmus** mit gewichteten Faktoren
- **Harte Filter** + **Weiche Scoring-Kriterien**

### MongoDB Product Schema

```javascript
{
  _id: ObjectId,
  name: String,
  brand: String,
  category: String, // "Autoshampoo", "Felgenreiniger", etc.
  price: Number,

  // MATCHING-KRITERIEN (CORE!)
  suitableFor: {
    vehicleTypes: ["PKW", "SUV", "Limousine"],
    vehicleBrands: ["BMW", "Mercedes", "ALL"],
    paintTypes: ["Metallic", "Uni", "Perleffekt"],
    paintColors: ["Schwarz", "Dunkelblau", "ALL"],
    vehicleAge: { min: 0, max: 20 }
  },

  // PROBLEML√ñSUNG
  solves: {
    problems: ["Wasserflecken", "Kalkflecken", "Lackpflege"],
    applications: ["Handw√§sche", "2-Eimer-Methode"],
    careAreas: ["Au√üenlack", "Plastikteile"]
  },

  // VERWENDUNGSKONTEXT
  usage: {
    experienceLevel: ["Anf√§nger", "Fortgeschritten"],
    frequency: ["W√∂chentlich", "Monatlich"],
    timeRequired: Number, // Minuten
    seasonality: ["Fr√ºhling", "Sommer", "ALL"]
  }
}
```

### Scoring-Logik

```javascript
// Gewichtete Punktevergabe
- Exakte Fahrzeugmarke: 40 Punkte
- L√∂st Hauptproblem: 30 Punkte
- Preiskategorie-Match: 15 Punkte
- Erfahrungslevel-Match: 10 Punkte
- Produktbewertung ‚â•4.0: 5 Punkte
```

## üé® Design Guidelines

### UI/UX Prinzipien

- **Mobile-First** Design
- **Intuitive Produktauswahl** mit Fahrzeug-Wizard
- **Klare Empfehlungs-Begr√ºndungen** f√ºr Vertrauen
- **B2B Dashboard** mit Professional Look & Feel

### Brand Identity

- **Zielgruppe**: Autopflege-Enthusiasten + Profis
- **Ton**: Fachkundig aber zug√§nglich
- **Farben**: Automotive-inspiriert (Grau, Blau, Akzente)

## üìä Development Phases

### Phase 1: MVP Foundation (Monate 1-3)

- ‚úÖ Backend-Grundarchitektur
- ‚úÖ Datenbank-Setup mit Product Schema
- ‚úÖ Regel-basierte Recommendation Engine
- ‚úÖ Basic Customer Web App
- ‚úÖ Partner Dashboard MVP

### Phase 2: Core Features (Monate 4-8)

- ‚úÖ Advanced Recommendation Logic
- ‚úÖ Payment Integration (Stripe)
- ‚úÖ Analytics & Tracking System
- ‚úÖ Partner Onboarding Flow

### Phase 3: Scale & Optimize (Monate 9-14)

- ‚úÖ Performance Optimization
- ‚úÖ Advanced Analytics Dashboard
- ‚úÖ Mobile App Development
- ‚úÖ API f√ºr Partner-Integration

### Phase 4: Launch & Growth (Monate 15-18)

- ‚úÖ Production Deployment
- ‚úÖ Marketing-Tools Integration
- ‚úÖ Advanced Business Features
- ‚úÖ International Expansion Prep

## üîß Development Standards

### Code Quality

```typescript
// Immer TypeScript verwenden
interface ProductRecommendation {
  product: Product;
  matchScore: number;
  reasoning: string[];
  partnerTier: 'basic' | 'premium' | 'enterprise';
}

// Error Handling
class RecommendationEngine {
  generateRecommendations(answers: CustomerAnswers): ProductRecommendation[] {
    try {
      // Regel-basierte Logik hier
    } catch (error) {
      logger.error('Recommendation generation failed', error);
      throw new RecommendationError('Unable to generate recommendations');
    }
  }
}
```

### Database Conventions

- **PostgreSQL**: User management, subscriptions, analytics
- **MongoDB**: Product catalog, recommendations, logs
- **Redis**: Sessions, caching, real-time data
- **Indexes**: Optimiert f√ºr Recommendation Queries

### API Design

```typescript
// RESTful API Struktur
POST /api/recommendations/generate
GET  /api/products/:id/similar
PUT  /api/partners/:id/products/:productId
DELETE /api/admin/products/:id

// Response Format
interface ApiResponse<T> {
  success: boolean;
  data?: T;
  error?: string;
  meta?: {
    pagination?: PaginationInfo;
    performance?: PerformanceMetrics;
  };
}
```

## üß™ Testing Strategy

### Testing Requirements

- **Unit Tests**: >90% Code Coverage
- **Integration Tests**: API Endpoints + Database
- **E2E Tests**: Critical User Flows
- **Performance Tests**: <100ms Recommendation Response

### Test Data

```javascript
// Beispiel Test-Produkte f√ºr Recommendation Engine
const testProducts = [
  {
    name: "Meguiar's Gold Class Shampoo",
    suitableFor: {
      vehicleBrands: ['BMW', 'Mercedes'],
      paintTypes: ['Metallic'],
    },
    solves: { problems: ['Wasserflecken', 'Lackpflege'] },
  },
];
```

## üöÄ Deployment & Infrastructure

### AWS Architecture

- **EKS Cluster** f√ºr Container Orchestration
- **RDS PostgreSQL** f√ºr Structured Data
- **DocumentDB** f√ºr MongoDB-compatible Product Catalog
- **ElastiCache Redis** f√ºr Caching
- **S3** f√ºr Static Assets & Product Images
- **CloudFront** CDN f√ºr Performance

### Environment Configuration

```bash
# Development
NODE_ENV=development
DATABASE_URL=postgresql://localhost:5432/autocare_dev
MONGODB_URL=mongodb://localhost:27017/products_dev
REDIS_URL=redis://localhost:6379

# Production
NODE_ENV=production
DATABASE_URL=${AWS_RDS_ENDPOINT}
MONGODB_URL=${AWS_DOCUMENTDB_ENDPOINT}
REDIS_URL=${AWS_ELASTICACHE_ENDPOINT}
```

## üìà Business Logic Rules

### Partner Tiers

```typescript
enum PartnerTier {
  BASIC = 'basic', // ‚Ç¨99/Monat, 5% Provision
  PREMIUM = 'premium', // ‚Ç¨299/Monat, 3% Provision
  ENTERPRISE = 'enterprise', // ‚Ç¨999/Monat, 2% Provision
}
```

### Recommendation Constraints

- **Max 20 Empfehlungen** pro Kunde-Anfrage
- **Min 3 verschiedene Marken** in Empfehlungen (Anti-Monopol)
- **Seasonal Adjustment** f√ºr saisonale Produkte
- **Stock-Verf√ºgbarkeit** muss gepr√ºft werden

## ‚ö†Ô∏è Wichtige Einschr√§nkungen

### Was NICHT verwenden:

- ‚ùå Keine KI/Machine Learning Libraries
- ‚ùå Keine OpenAI, TensorFlow, PyTorch
- ‚ùå Keine Widget-Einbettung f√ºr externe Shops
- ‚ùå Keine komplexen ML-Algorithmen

### Was IMMER beachten:

- ‚úÖ Regel-basierte Logik mit klaren Kriterien
- ‚úÖ Transparente Empfehlungs-Begr√ºndungen
- ‚úÖ Performance: <100ms Response Time
- ‚úÖ Datenbank-Optimierung f√ºr Matching-Queries
- ‚úÖ B2B-fokussierte Monetarisierung

## üì± API Endpoints (Core)

### Customer API

```typescript
POST /api/recommendations/generate
{
  vehicleBrand: "BMW",
  paintType: "Metallic",
  primaryProblem: "Wasserflecken",
  budgetPreference: "Mittelklasse"
}

GET /api/products/:id/details
GET /api/recommendations/explain/:productId
```

### Partner API

```typescript
GET /api/partners/dashboard/stats
PUT /api/partners/products/:id/matching-rules
POST /api/partners/products/bulk-upload
```

### Admin API

```typescript
GET / api / admin / recommendations / performance;
POST / api / admin / scoring - weights / update;
GET / api / admin / partners / analytics;
```

## üìã Linear Integration

### Issue Labels (verwenden!)

- `Phase 1: Foundation` / `Phase 2: Core` / `Phase 3: Scale` / `Phase 4: Launch`
- `Frontend` / `Backend` / `Database` / `DevOps`
- `üö® Critical` / `‚ú® Feature` / `üêõ Bug` / `üß™ Testing`

### Branch Naming

```bash
git checkout -b feature/CL-{issue-number}-{short-description}
git checkout -b bugfix/CL-{issue-number}-{bug-description}
git checkout -b epic/CL-{issue-number}-{epic-name}
```

## üéØ Success Metrics

### Technical KPIs

- **Recommendation Response Time**: <100ms
- **System Uptime**: >99.9%
- **Database Query Performance**: <50ms avg
- **API Error Rate**: <0.1%

### Business KPIs

- **Partner Onboarding**: 10+ Partner im ersten Jahr
- **Customer Conversion**: >15% Click-through zu Partner-Shops
- **Recommendation Relevance**: >85% User Satisfaction
- **Revenue Target**: ‚Ç¨50k MRR nach 18 Monaten

## üèÅ **AKTUELLER ENTWICKLUNGSSTAND (August 2025)**

### Phase 1: MVP Foundation ‚úÖ KOMPLETT

- ‚úÖ Backend-Grundarchitektur (Express + TypeScript)
- ‚úÖ Datenbank-Setup (PostgreSQL + MongoDB)
- ‚úÖ Regel-basierte Recommendation Engine (MongoDB Product Schema)
- ‚úÖ Basic Customer Web App
- ‚úÖ Partner Dashboard MVP mit Analytics

### Phase 2: Core Features üîÑ IN PROGRESS

- ‚úÖ Advanced Recommendation Logic (Scoring-Algorithmus implementiert)
- ‚úÖ Partner Analytics Dashboard (Revenue, Performance, Insights)
- ‚úÖ Authentication System (Admin + Partner Login)
- üîÑ Payment Integration (Stripe) - N√ÑCHSTER SCHRITT
- üîÑ Advanced Analytics Dashboard - ERWEITERT BEN√ñTIGT

### Aktuell Implementierte Features:

- **CL-6**: Recommendation Engine ‚úÖ OPERATIONAL
- **CL-7**: B2B Partner Dashboard ‚úÖ VOLLST√ÑNDIG IMPLEMENTIERT
  - Partner Analytics Service (400+ lines)
  - Revenue Tracking & Performance Metrics
  - Market Insights & Tier Recommendations
  - Professional UI mit Echtzeit-Daten
- **CL-8**: Analytics & Reporting - BEREIT F√úR ENTWICKLUNG

### Technischer Stack (AKTIV):

```
Frontend: React 18 + TypeScript + Next.js ‚úÖ
Backend: Node.js + Express + TypeScript ‚úÖ
Database: PostgreSQL (Users/Auth) + MongoDB (Products) ‚úÖ
Authentication: JWT + Role-based Access Control ‚úÖ
Middleware: Next.js Middleware f√ºr Route Protection ‚úÖ
```

### Live Credentials:

```
Partner Login: partner@autocare.de / partner123!
Admin Login: admin@autocare.de / admin123!
Frontend: http://localhost:5000
Backend: http://localhost:5001
```

---

## üí° Copilot-Hinweise

Wenn du Code f√ºr dieses Projekt schreibst:

1. **Verwende IMMER TypeScript** f√ºr Type Safety
2. **Keine KI/ML** - nur regel-basierte Algorithmen
3. **MongoDB Schema** exakt wie oben definiert verwenden
4. **Performance First** - alle DB-Queries optimieren
5. **B2B Focus** - Partner-Dashboard ist Priority #1
6. **Mobile-First** - alle UI-Komponenten responsive
7. **Error Handling** - comprehensive try/catch blocks
8. **Testing** - Unit Tests f√ºr jede neue Funktion
9. **Documentation** - JSDoc f√ºr alle public methods
10. **Linear Integration** - Issue-Numbers in Commits

**Bei Unsicherheiten frage nach - besser nachfragen als falsche Annahmen treffen!** üöÄ

### üéØ **N√ÑCHSTE DEVELOPMENT PRIORITIES (CL-8)**

#### Immediate Next Steps:

1. **CL-8: Advanced Analytics & Reporting**

   - Export-Funktionalit√§t f√ºr Partner-Daten
   - Detaillierte Revenue-Reports
   - Performance-Benchmarks
   - Automatische Insights-Generierung

2. **Payment Integration (Stripe)**

   - Partner Subscription Management
   - Automated Billing System
   - Usage-based Pricing Tiers

3. **Admin Panel Enhancement**
   - Partner Management Dashboard
   - System Health Monitoring
   - Revenue Analytics Overview

#### Development Rules:

- **CL-Issue Numbers** in allen Commits verwenden
- **Mobile-First** f√ºr alle neuen UI-Komponenten
- **<100ms** Response Time f√ºr alle API Endpoints
- **MongoDB Aggregation** f√ºr komplexe Analytics
- **TypeScript Strict Mode** f√ºr alle neuen Files

**WICHTIG**: Alle Entwicklungen m√ºssen regel-basiert bleiben - KEINE KI/ML Integration!

- Arbeite die Issues auf Linear nach Phasen sortiert ab
- Benutze den Linear MCP
